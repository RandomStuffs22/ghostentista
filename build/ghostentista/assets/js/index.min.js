(function($){$.fn.slabText=function(options){var settings={fontRatio:.78,forceNewCharCount:true,wrapAmpersand:true,headerBreakpoint:null,viewportBreakpoint:null,noResizeEvent:false,resizeThrottleTime:300,maxFontSize:999,postTweak:true,precision:3,minCharsPerLine:0};$("body").addClass("slabtexted");return this.each(function(){if(options){$.extend(settings,options)}var $this=$(this),keepSpans=$("span.slabtext",$this).length,words=keepSpans?[]:String($.trim($this.text())).replace(/\s{2,}/g," ").split(" "),origFontSize=null,idealCharPerLine=null,fontRatio=settings.fontRatio,forceNewCharCount=settings.forceNewCharCount,headerBreakpoint=settings.headerBreakpoint,viewportBreakpoint=settings.viewportBreakpoint,postTweak=settings.postTweak,precision=settings.precision,resizeThrottleTime=settings.resizeThrottleTime,minCharsPerLine=settings.minCharsPerLine,resizeThrottle=null,viewportWidth=$(window).width(),headLink=$this.find("a:first").attr("href")||$this.attr("href"),linkTitle=headLink?$this.find("a:first").attr("title"):"";if(!keepSpans&&minCharsPerLine&&words.join(" ").length<minCharsPerLine){return}var grabPixelFontSize=function(){var dummy=jQuery('<div style="display:none;font-size:1em;margin:0;padding:0;height:auto;line-height:1;border:0;">&nbsp;</div>').appendTo($this),emH=dummy.height();dummy.remove();return emH};var resizeSlabs=function resizeSlabs(){var parentWidth=$this.width(),fs;if(parentWidth===0){return}$this.removeClass("slabtextdone slabtextinactive");if(viewportBreakpoint&&viewportBreakpoint>viewportWidth||headerBreakpoint&&headerBreakpoint>parentWidth){$this.addClass("slabtextinactive");return}fs=grabPixelFontSize();if(!keepSpans&&(forceNewCharCount||fs!=origFontSize)){origFontSize=fs;var newCharPerLine=Math.min(60,Math.floor(parentWidth/(origFontSize*fontRatio))),wordIndex=0,lineText=[],counter=0,preText="",postText="",finalText="",slice,preDiff,postDiff;if(newCharPerLine!=idealCharPerLine){idealCharPerLine=newCharPerLine;while(wordIndex<words.length){postText="";while(postText.length<idealCharPerLine){preText=postText;postText+=words[wordIndex]+" ";if(++wordIndex>=words.length){break}}if(minCharsPerLine){slice=words.slice(wordIndex).join(" ");if(slice.length<minCharsPerLine){postText+=slice;preText=postText;wordIndex=words.length+2}}preDiff=idealCharPerLine-preText.length;postDiff=postText.length-idealCharPerLine;if(preDiff<postDiff&&preText.length>=(minCharsPerLine||2)){finalText=preText;wordIndex--}else{finalText=postText}finalText=$("<div/>").text(finalText).html();if(settings.wrapAmpersand){finalText=finalText.replace(/&amp;/g,'<span class="amp">&amp;</span>')}finalText=$.trim(finalText);lineText.push('<span class="slabtext">'+finalText+"</span>")}$this.html(lineText.join(" "));if(headLink){$this.wrapInner('<a href="'+headLink+'" '+(linkTitle?'title="'+linkTitle+'" ':"")+"/>")}}}else{origFontSize=fs}$("span.slabtext",$this).each(function(){var $span=$(this),innerText=$span.text(),wordSpacing=innerText.split(" ").length>1,diff,ratio,fontSize;if(postTweak){$span.css({"word-spacing":0,"letter-spacing":0})}ratio=parentWidth/$span.width();fontSize=parseFloat(this.style.fontSize)||origFontSize;$span.css("font-size",Math.min((fontSize*ratio).toFixed(precision),settings.maxFontSize)+"px");diff=!!postTweak?parentWidth-$span.width():false;if(diff){$span.css((wordSpacing?"word":"letter")+"-spacing",(diff/(wordSpacing?innerText.split(" ").length-1:innerText.length)).toFixed(precision)+"px")}});$this.addClass("slabtextdone")};resizeSlabs();if(!settings.noResizeEvent){$(window).resize(function(){if($(window).width()==viewportWidth){return}viewportWidth=$(window).width();clearTimeout(resizeThrottle);resizeThrottle=setTimeout(resizeSlabs,resizeThrottleTime)})}})}})(jQuery);(function($){"use strict";$.fn.fitVids=function(options){var settings={customSelector:null};if(!document.getElementById("fit-vids-style")){var div=document.createElement("div"),ref=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0],cssStyles="&shy;<style>.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>";div.className="fit-vids-style";div.id="fit-vids-style";div.style.display="none";div.innerHTML=cssStyles;ref.parentNode.insertBefore(div,ref)}if(options){$.extend(settings,options)}return this.each(function(){var selectors=["iframe[src*='player.vimeo.com']","iframe[src*='youtube.com']","iframe[src*='youtube-nocookie.com']","iframe[src*='kickstarter.com'][src*='video.html']","object","embed"];if(settings.customSelector){selectors.push(settings.customSelector)}var $allVideos=$(this).find(selectors.join(","));$allVideos=$allVideos.not("object object");$allVideos.each(function(){var $this=$(this);if(this.tagName.toLowerCase()==="embed"&&$this.parent("object").length||$this.parent(".fluid-width-video-wrapper").length){return}var height=this.tagName.toLowerCase()==="object"||$this.attr("height")&&!isNaN(parseInt($this.attr("height"),10))?parseInt($this.attr("height"),10):$this.height(),width=!isNaN(parseInt($this.attr("width"),10))?parseInt($this.attr("width"),10):$this.width(),aspectRatio=height/width;if(!$this.attr("id")){var videoID="fitvid"+Math.floor(Math.random()*999999);$this.attr("id",videoID)}$this.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",aspectRatio*100+"%");$this.removeAttr("height").removeAttr("width")})})}})(window.jQuery||window.Zepto);$(function(){var config=window.ghostentista.config;var siteURL=location.host;var internalLinksQuery="a[href^='"+siteURL+"'], a[href^='/'], a[href^='./'], a[href^='../'], a[href^='#']";var $window=$(window);var $mainContent=$("#main-content");var $internalLinks=$(internalLinksQuery);var $relatedPostsContainer=$("#related-posts-container");var $logo=$("#site-head-content");var $header=$("#site-head");var $footerLinks=$(".get-connected p");$mainContent.fitVids();var socialProfiles=config.socialProfiles;if(socialProfiles.facebook!="")$footerLinks.append($('<a class="icon-facebook-circled" href="'+socialProfiles.facebook+'" target="_blank"></a>'));if(socialProfiles.email!="")$footerLinks.append($('<a class="icon-mail-circled" href="'+socialProfiles.email+'" target="_blank"></a>'));if(socialProfiles.twitter!="")$footerLinks.append($('<a class="icon-twitter-circled" href="'+socialProfiles.twitter+'" target="_blank"></a>'));if(socialProfiles.linkedIn!="")$footerLinks.append($('<a class="icon-linkedin-circled" href="'+socialProfiles.linkedIn+'" target="_blank"></a>'));if(socialProfiles.github!="")$footerLinks.append($('<a class="icon-github-circled" href="'+socialProfiles.github+'" target="_blank"></a>'));if(socialProfiles.pinterest!="")$footerLinks.append($('<a class="icon-pinterest-circled" href="'+socialProfiles.pinterest+'" target="_blank"></a>'));if(socialProfiles.instagram!="")$footerLinks.append($('<a class="icon-instagram-circled" href="'+socialProfiles.instagram+'" target="_blank"></a>'));if(config.logoBackground!="")$logo.css({background:config.logoBackground});var ios=iOSversion();if(ios&&ios[0]<=6)$("body").addClass("no-fixed-elements");$window.scroll(function(){var logoHeight=$logo.height()+40;var headerHeight=$header.height()-$window.scrollTop();if(headerHeight>logoHeight){var marginTop=headerHeight/2-logoHeight/2+"px";$logo.parent().css({paddingTop:marginTop})}var $secondaryTitle=$("#secondaryTitle");$secondaryTitle.css({background:config.logoBackground});if(headerHeight<=0){if(!$secondaryTitle.hasClass("displayed")){$secondaryTitle.addClass("displayed");$secondaryTitle.animate({top:"0px"},500)}}else{if($secondaryTitle.hasClass("displayed")){$secondaryTitle.removeClass("displayed");$secondaryTitle.animate({top:"-200px"},500)}}});var siteName=$("#site-head h1").text().replace(/\s+/g," ");var slogan=$("#site-head h2").text().replace(/\s+/g," ");var header=$('<nav id="secondaryTitle"><div class="siteInfo"><h1>'+siteName+"</h1><h2>"+slogan+'</h2></div><a href="#top" id="scroll-to-top"></a></nav>');$("body").prepend(header);$("#scroll-to-top").click(function(e){e.preventDefault();$("html, body").animate({scrollTop:0},200)});$window.resize(function(){var articles=$(".post");for(var x=0;x<articles.length;x+=2){var ea=$(articles[x]).find(".post-title");var oa=$(articles[x+1]).find(".post-title");ea.css({height:"auto",paddingTop:0});oa.css({height:"auto",paddingTop:0});var eh=ea.innerHeight(),oh=oa.innerHeight();var th=Math.max(eh,oh)+"px";var pt=Math.abs(eh-oh)/2+"px";ea.css({height:th,paddingTop:eh<oh?pt:0});oa.css({height:th,paddingTop:eh>oh?pt:0})}$window.trigger("scroll")});if($relatedPostsContainer.length>0){var rp=$relatedPostsContainer.clone();$relatedPostsContainer.remove();localStorage.setItem("relatedPosts",JSON.stringify(rp.html()));setTimeout(scrollToContent,200)}else{displayRelatedPosts()}$window.trigger("scroll");$window.trigger("resize");setTimeout(function(){$("h2.post-title, h1.post-title").slabText({minCharsPerLine:15});$("article.loading").each(function(){var $this=$(this);setTimeout(function(){$this.removeClass("loading");$window.trigger("resize")},Math.random()*200)})},500);function displayRelatedPosts(){var related=JSON.parse(localStorage.getItem("relatedPosts"));var $nav=$("nav.related-posts ul");if(related.length>0&&$nav.length>0){$nav.html(related)}else{$("nav.related-posts").remove()}}function scrollToContent(){var contentAnchor=$("span[name='post-content']");if(contentAnchor.length>0){$("html,body").animate({scrollTop:contentAnchor.offset().top-10},"slow")}else{$("html,body").animate({scrollTop:0},"slow")}}function dataFilter(data,type){type=type||"text";if(type=="html"||type=="text"){data=data.replace(/<link.*?\/>/gi,"");data=data.replace(/<script.*?>([\w\W]*?)<\/script>/gi,"");data=$(data).filter("#main-content").children().parent();return data.html()}return data}function iOSversion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var v=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(v[1],10),parseInt(v[2],10),parseInt(v[3]||0,10)]}}if(location.hostname!=="localhost"&&location.hostname!=="127.0.0.1"&&config.googleAnalytics){(function(i,s,o,g,r,a,m){i["GoogleAnalyticsObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date;a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create",config.googleAnalytics);ga("send","pageview")}});