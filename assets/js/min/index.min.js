jQuery(function(e){function t(n){n.preventDefault();var a=e("#more-posts"),r=a.attr("href");a.remove(),e.ajax({url:r+" #main-content",cache:!0,contentType:"html",dataFilter:o,success:function(e,n){switch(n){case"error":alert("Something terrible has happened. Sky is falling on your head.");break;case"success":i.append(e),i.find("#more-posts").click(t)}}})}function n(){var t=JSON.parse(localStorage.getItem("relatedPosts")),n=e("nav.related-posts ul");t.length>0&&n.length>0?n.html(t):e("nav.related-posts").remove()}function a(){var t=e("span[name='post-content']");t.length>0?e("html,body").animate({scrollTop:t.offset().top-30},"slow"):e("html,body").animate({scrollTop:0},"slow")}function o(t,n){return n=n||"text","html"==n||"text"==n?(t=t.replace(/<link.*?\/>/gi,""),t=t.replace(/<script.*?>([\w\W]*?)<\/script>/gi,""),t=e(t).filter("#main-content").children().parent(),t.html()):t}function r(t){t.preventDefault();var n=e(this).attr("href"),a=e(this).attr("title")||null;s.pushState({},a,n)}var s=window.History,l=location.host,c="a[href^='"+l+"'], a[href^='/'], a[href^='./'], a[href^='../'], a[href^='#']";e(window);var i=e("#main-content"),h=e(c),p=e("#related-posts-container");if(a(),p.length>0){var m=p.clone();p.remove(),localStorage.setItem("relatedPosts",JSON.stringify(m.html()))}else n();s.enabled&&(s.Adapter.bind(window,"statechange",function(){var l=s.getState();e.ajax({url:l.url+" #main-content",cache:!0,contentType:"html",dataFilter:o,success:function(e,o){switch(o){case"error":alert("Something terrible has happened. Sky is falling on your head.");break;case"success":i.html(e).find(c).not("#more-posts").click(r),i.find("#more-posts").click(t),Prism.highlightElement(),a(),n()}}})}),console.log(h.not("#more-posts")),h.not("#more-posts").click(r)),e("#more-posts").click(t)});