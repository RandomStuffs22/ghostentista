jQuery(function(t){function e(){var e=JSON.parse(localStorage.getItem("relatedPosts"));e.length>0&&t("nav.related-posts ul").length>0?t("nav.related-posts ul").html(e):t("nav.related-posts").remove()}function a(){var e=t("span[name='post-content']");e.length>0?t("html,body").animate({scrollTop:e.offset().top-30},"slow"):t("html,body").animate({scrollTop:0},"slow")}var n=window.History,r=location.host,l="a[href^='"+r+"'], a[href^='/'], a[href^='./'], a[href^='../'], a[href^='#']";t(window);var o=t("#main-content"),s=t(l),i=t("#related-posts-container");if(a(),i.length>0){var c=i.clone();i.remove(),localStorage.setItem("relatedPosts",JSON.stringify(c.html()))}else e();n.enabled&&(n.Adapter.bind(window,"statechange",function(){var r=n.getState();t.ajax({url:r.url+" #main-content",cache:!0,contentType:"html",statusCode:{404:function(){Avgrund.show("#default-popup")}},dataFilter:function(e,a){return a=a||"text","html"==a||"text"==a?(e=e.replace(/<link.*?\/>/gi,""),e=e.replace(/<script.*?>([\w\W]*?)<\/script>/gi,""),e=t(e).filter("#main-content").children().parent(),e.html()):e},success:function(t,n){switch(o.html(t),Prism.highlightElement(),n){case"error":alert("Something terrible has happened. Sky is falling on your head.");break;case"success":a(),e()}}})}),s.click(function(e){e.preventDefault();var a=t(this).attr("href"),r=t(this).attr("title")||null;n.pushState({},r,a)}))});