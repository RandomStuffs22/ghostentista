/*
 * Copyright (c) Viktor Bezdek 2013
 * Correct typography and vertical rhythm helpers.
 * Will be released separately when finished.
 * I suggest not to use it anywhere else.
 */

////////////////////////////////////////////////////////////////////////////////
// Configuration
////////////////////////////////////////////////////////////////////////////////

// base font size
@bodyFontSize: 1.2em;
// line height based on body font size
@bodyLineHeight: 1.5;
// font size scale factor
@scaleFactor: 1.61803398875;
// scale factor modifier for headers
// 99% chance you won't need to change this
@headerScaleIncrement: 0.75;
@headerMarginIncrement: 0.65;

////////////////////////////////////////////////////////////////////////////////
// Mixins
////////////////////////////////////////////////////////////////////////////////

// -----------------------------------------------------------------------------
// Public

.heightInLines(@numLines) when (ispixel(@bodyFontSize)) {
  height: @bodyFontSize * @bodyLineHeight * @numLines;
}

.heightInLines(@numLines) when (isem(@bodyFontSize)) {
  height: (1/(@bodyLineHeight*@numLines)) * @bodyLineHeight * @numLines;
}

// -----------------------------------------------------------------------------
// Private - Do not change this!

.__header(@scale, @topLines, @bottomLines) when (isem(@bodyFontSize)) {
  font-size: @bodyFontSize * @scaleFactor * @headerScaleIncrement * @scale;
  line-height: (1/(@bodyLineHeight*@scale)) * @bodyFontSize * @bodyLineHeight * @scale;
  margin-top: (1/(@scaleFactor*@scale)) * (@bodyFontSize * @bodyLineHeight * @topLines) * @headerMarginIncrement;
  margin-bottom: (1/(@scaleFactor*@scale)) * (@bodyFontSize * @bodyLineHeight * @bottomLines) * @headerMarginIncrement;
}

.__header(@scale, @topLines, @bottomLines) when (ispixel(@bodyFontSize)) {
  font-size: @bodyFontSize * @scaleFactor * @headerScaleIncrement * @scale;
  line-height: @bodyFontSize * @bodyLineHeight * @scale;
  margin-top: (@bodyFontSize * @bodyLineHeight * @topLines);
  margin-bottom: (@bodyFontSize * @bodyLineHeight * @bottomLines);
}

.__spacing(@topLines, @bottomLines) when (isem(@bodyFontSize)) {
  margin-top: (1/(@scaleFactor)) * (@bodyFontSize * @bodyLineHeight * @topLines);
  margin-bottom: (1/(@scaleFactor)) * (@bodyFontSize * @bodyLineHeight * @bottomLines);
}

.__spacing(@topLines, @bottomLines) when (ispixel(@bodyFontSize)) {
  margin-top: (1/(@scaleFactor)) * (@bodyFontSize * @bodyLineHeight * @topLines);
  margin-bottom: (1/(@scaleFactor)) * (@bodyFontSize * @bodyLineHeight * @bottomLines);
}

////////////////////////////////////////////////////////////////////////////////
// Typo core
// @todo preset all basic typographic elements
////////////////////////////////////////////////////////////////////////////////

#main-content {
  font-size: @bodyFontSize;
  line-height: @bodyFontSize * @bodyLineHeight;
}

h1 {
  .__header(3.5,1,2);
}

h2 {
  .__header(3,2,1);
}

h3 {
  .__header(2.5,1,0);
}

h4 {
  .__header(2.25,1,0);
}

h5 {
  .__header(2,1,0);
}

h6 {
  .__header(1.75,1,0);
}

p, ul, ol, table {
  .__spacing(1,0);
  hyphenate-limit-last: 2;
  hyphens: auto;
}

small, aside {
  font-size: @bodyFontSize / @scaleFactor;
}
